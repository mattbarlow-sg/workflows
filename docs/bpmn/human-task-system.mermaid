digraph BPMNProcess {
  rankdir=LR;
  node [shape=box];

  start-task-creation [label="Task Creation Request", shape=circle];
  end-task-processed [label="Task Processed", shape=doublecircle];
  timer-escalation [label="Escalation Timer", shape=circle];
  start-cli-query [label="CLI Query Request", shape=circle];
  end-query-complete [label="Query Complete", shape=doublecircle];
  service-create-task [label="Create Task Record", style="rounded"];
  service-add-to-queue [label="Add to LIFO Queue", style="rounded"];
  user-task-review [label="Operator Reviews Task", style="rounded"];
  service-capture-proof [label="Capture Proof", style="rounded"];
  service-signal-completion [label="Signal Completion", style="rounded"];
  service-signal-approval [label="Signal Approval", style="rounded"];
  service-signal-rejection [label="Signal Rejection", style="rounded"];
  service-send-clarification [label="Send to Requester", style="rounded"];
  service-signal-cancellation [label="Signal Cancellation", style="rounded"];
  service-update-status [label="Update Task Status", style="rounded"];
  service-send-response [label="Send Response to Workflow", style="rounded"];
  service-mark-escalated [label="Mark Task as Escalated", style="rounded"];
  service-update-queue [label="Update Task in Queue", style="rounded"];
  service-fetch-queue [label="Fetch Queue State", style="rounded"];
  service-format-display [label="Format Task List for Display", style="rounded"];
  service-wait-clarification [label="Wait for Clarification", style="rounded"];
  gateway-operator-decision [label="X", shape=diamond];
  gateway-merge-after-action [label="X", shape=diamond];
  gateway-clarification-loop [label="X", shape=diamond];
  start-task-creation -> service-create-task;
  service-create-task -> service-add-to-queue;
  service-add-to-queue -> gateway-clarification-loop;
  gateway-clarification-loop -> user-task-review;
  user-task-review -> gateway-operator-decision;
  gateway-operator-decision -> service-capture-proof [label="Complete"];
  service-capture-proof -> service-signal-completion;
  service-signal-completion -> gateway-merge-after-action;
  gateway-operator-decision -> service-signal-approval [label="Approve"];
  service-signal-approval -> gateway-merge-after-action;
  gateway-operator-decision -> service-signal-rejection [label="Reject"];
  service-signal-rejection -> gateway-merge-after-action;
  gateway-operator-decision -> service-send-clarification [label="Return for Clarification"];
  service-send-clarification -> service-wait-clarification;
  service-wait-clarification -> gateway-clarification-loop;
  gateway-operator-decision -> service-signal-cancellation [label="Cancel"];
  service-signal-cancellation -> gateway-merge-after-action;
  gateway-merge-after-action -> service-update-status;
  service-update-status -> service-send-response;
  service-send-response -> end-task-processed;
  timer-escalation -> service-mark-escalated;
  service-mark-escalated -> service-update-queue;
  service-update-queue -> user-task-review;
  start-cli-query -> service-fetch-queue;
  service-fetch-queue -> service-format-display;
  service-format-display -> end-query-complete;
}
